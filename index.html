<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vydei Player</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg-[#1E1E24] text-white font-sans">

  <!-- Header Logo -->
  <header class="p-4 flex items-center space-x-2">
    <i class="fa-solid fa-play text-green-500 text-2xl"></i>
    <h1 class="text-xl font-bold">VYDEI</h1>
  </header>

  <!-- Kontainer Utama -->
  <main class="max-w-3xl mx-auto">

    <!-- Thumbnail Video -->
    <div class="rounded-md overflow-hidden">
      <video id="video-player" class="w-full rounded-md" controls preload="auto"></video>
    </div>

    <!-- Info Video -->
    <div class="p-4">
      <h2 id="video-title" class="text-lg font-semibold mb-3"></h2>

      <div class="flex space-x-6 text-gray-300 text-sm">
        <div class="flex items-center space-x-1">
          <i class="fa-regular fa-clock"></i>
          <span id="video-duration">00:00</span>
        </div>
        <div class="flex items-center space-x-1">
          <i class="fa-regular fa-file-video"></i>
          <span id="video-size">0MB</span>
        </div>
        <div class="flex items-center space-x-1">
          <i class="fa-regular fa-calendar"></i>
          <span id="video-date">-</span>
        </div>
      </div>
    </div>
  </main>

<script>
document.addEventListener('DOMContentLoaded', async () => {
  let urlPath = window.location.pathname;
  let videoId = "";

  if (urlPath.startsWith("/e/")) {
    videoId = urlPath.replace("/e/", "");
  } else {
    videoId = urlPath.replace("/", "");
  }

  const videoPlayer = document.getElementById('video-player');
  const titleEl = document.getElementById('video-title');
  const durationEl = document.getElementById('video-duration');
  const sizeEl = document.getElementById('video-size');
  const dateEl = document.getElementById('video-date');

  try {
    const response = await axios.get('https://raw.githubusercontent.com/DoodstreamPro/_e/refs/heads/main/Video.json');
    const videos = response.data;
    const foundVideo = videos.find(video => video.id === videoId);

    if (foundVideo) {
      videoPlayer.src = foundVideo.Url;
      if (foundVideo.PosterUrl) {
        videoPlayer.setAttribute("poster", foundVideo.PosterUrl);
      }

      titleEl.textContent = foundVideo.Judul || "Tanpa Judul";
      durationEl.textContent = foundVideo.Duration || "00:00";
      sizeEl.textContent = foundVideo.Size || "0MB";
      dateEl.textContent = foundVideo.Tanggal || "-";
    } else {
      titleEl.textContent = "Video tidak ditemukan (ID tidak cocok)";
    }
  } catch (err) {
    console.error("Error fetch JSON:", err);
    titleEl.textContent = "Gagal memuat data video.";
  }
});
</script>
</body>
</html>